<?xml version="1.0" encoding="UTF-8"?>
<plugin:page xmlns="html5" xmlns:plugin="plugin" xmlns:c="core">
	<plugin:head>
		<link rel="stylesheet" href="css/app.css" />
		<link rel="stylesheet" href="css/highlight-8.7.min.css" />
		<script type="text/javascript" src="js/highlight-8.7.min.js"></script>
		<script type="text/javascript" src="js/marked-0.3.5.min.js"></script>
		<script type="text/javascript" src="js/app.js"></script>
	</plugin:head>
	<plugin:body>
		<c:if test="${not empty msg}">
			<p class="msg-container">
				<span class="fa fa-info-circle fa-lg" style="margin-left: 5px; margin-right: 5px; color: white;"></span>
				<c:out value="${msg.details}"/>
			</p>
		</c:if>
	
	    <div style="position: relative; min-height: 100px;">
	    	<plugin:hasPermission res="PAGE" permission="EDIT">
	    		<div class="pseudo-edit-btn pt-round-btn" style="position: absolute; top: 10px; right: 10px; z-index: 2;" >
				   <span class="fa fa-pencil fa-lg" style="font-size: 1.2em; margin-top: 0.7em;"></span>
				</div>
				<!-- 
				<div style="text-align: right; margin-bottom: 10px;">
					<pButton class="pt-btn pseudo-edit-btn" faClass="fa fa-pencil fa-lg" faStyle="font-size: 1.2em; padding-right: 6px;"> 
						<c:out value="Edit" />
		  			</pButton>
		  		</div>
		  		 -->
	  		</plugin:hasPermission>

			<div class="pseudo-db-content" style="display: none;"><c:out value="${content}" /></div>
			<div class="pseudo-rendered-content" style="font-size: 14px; font-family: Arial;"></div>

			<form name="content" method="POST" action="updateContent">
		        <div class="pseudo-new-content" style="display:none;">
		        	<textarea property="content" style="min-height: 200px; max-height: 400px; width: 100%; font-size: 14px; font-family: Arial;" />
		        	
		        	<div style="text-align: right; margin-top: 20px;">
				        <!--
				        <pButton class="pt-btn pseudo-submit-button" faClass="fa fa-save fa-lg" faStyle="font-size: 1.2em; padding-right: 6px;"> 
							<c:out value="Update" />
			  			</pButton>
			  			<pButton class="pt-btn pseudo-cancel-btn" faClass="fa fa-close fa-lg" faStyle="font-size: 1.2em;  padding-right: 6px;"> 
							<c:out value="Cancel" />
			  			</pButton>
			  			  -->
			  			<button type="button" class="btn btn-default pseudo-submit-button">
			  				<span style="font-size: 1.2em; padding-right: 6px;" class="fa fa-save fa-lg"></span>
			  				<c:out value="Update" />
			  			</button>
			  			<button type="button" class="btn btn-default pseudo-cancel-button" style="margin-left: 10px;">
			  				<span style="font-size: 1.2em;  padding-right: 6px;" class="fa fa-close fa-lg"></span>
			  				<c:out value="Cancel" />
			  			</button>
		  			</div>
		        </div>
	        </form>
	    </div>
	    
	    <script type="text/javascript">
	    	<![CDATA[
	    		${app_js_namespace}.tiles.push('${piston_tile_id}');
				invoke('${app_js_namespace}.renderMarkdown', window, '${piston_tile_id}');
        	]]>
      	</script>
	</plugin:body>
</plugin:page>
